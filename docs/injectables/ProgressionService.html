<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ng-guitar documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
        <link rel="stylesheet" href="../styles/theme-material.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">ng-guitar documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li>Injectables</li>
  <li >ProgressionService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>libs/etude/src/lib/etude/utils/progression.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>The progression service returns notes in a progression.
To keep practice interesting these should be randomised, but
the selection should be weighted by good notes to play given last
note, key and location within bar</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_countIn" >_countIn</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_currentBar" >_currentBar</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_frets" >_frets</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_resolution" >_resolution</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#_startOfBar" >_startOfBar</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#cagedShapes" >cagedShapes</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#key" >key</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#major" >major</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#notes" >notes</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#previousFret" >previousFret</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#previousString" >previousString</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#strings" >strings</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#tuning" >tuning</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addCagedShapeWeights" >addCagedShapeWeights</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addFretProximityWeights" >addFretProximityWeights</a>
                            </li>
                            <li>
                                <a href="#getFret" >getFret</a>
                            </li>
                            <li>
                                <a href="#getNextNotes" >getNextNotes</a>
                            </li>
                            <li>
                                <a href="#getNumericArrayOfFretNumbers" >getNumericArrayOfFretNumbers</a>
                            </li>
                            <li>
                                <a href="#getNumericArrayOfStringNumbers" >getNumericArrayOfStringNumbers</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getRandomIntegerInRange" >getRandomIntegerInRange</a>
                            </li>
                            <li>
                                <a href="#getString" >getString</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getValidNote" >getValidNote</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getWeightedRandom" >getWeightedRandom</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setPreviousState" >setPreviousState</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setupFretWeights" >setupFretWeights</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#setupStringWeights" >setupStringWeights</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>


            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addCagedShapeWeights"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>addCagedShapeWeights</b></span>
                        <a href="#addCagedShapeWeights"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addCagedShapeWeights(notes: FretboardNote[], weightMultiplier: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, fretWeights: number[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="180"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:180</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>notes</td>
                                    <td>
                                            <code>FretboardNote[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>weightMultiplier</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>fretWeights</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addFretProximityWeights"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>addFretProximityWeights</b></span>
                        <a href="#addFretProximityWeights"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addFretProximityWeights(notes: FretboardNote[], previousFret: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, weightMultiplier: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, fretWeights: number[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="222"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:222</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>notes</td>
                                    <td>
                                            <code>FretboardNote[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>previousFret</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>weightMultiplier</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>fretWeights</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFret"></a>
                    <span class="name">
                        <span ><b>getFret</b></span>
                        <a href="#getFret"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getFret(string: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="136"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:136</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>string</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNextNotes"></a>
                    <span class="name">
                        <span ><b>getNextNotes</b></span>
                        <a href="#getNextNotes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getNextNotes(beat: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="63"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:63</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>beat</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/Notes.html" target="_self" >Notes</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNumericArrayOfFretNumbers"></a>
                    <span class="name">
                        <span ><b>getNumericArrayOfFretNumbers</b></span>
                        <a href="#getNumericArrayOfFretNumbers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getNumericArrayOfFretNumbers(notes: FretboardNote[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="248"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:248</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>notes</td>
                                    <td>
                                            <code>FretboardNote[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>number[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getNumericArrayOfStringNumbers"></a>
                    <span class="name">
                        <span ><b>getNumericArrayOfStringNumbers</b></span>
                        <a href="#getNumericArrayOfStringNumbers"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getNumericArrayOfStringNumbers()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="110"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:110</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>number[]</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getRandomIntegerInRange"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>getRandomIntegerInRange</b></span>
                        <a href="#getRandomIntegerInRange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getRandomIntegerInRange(min: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, max: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="269"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:269</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Returns a random integer between min (inclusive) and max (inclusive)</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>min</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>max</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </div>
                    <div class="io-description">
                        <p>{number}</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getString"></a>
                    <span class="name">
                        <span ><b>getString</b></span>
                        <a href="#getString"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getString()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="91"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:91</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getValidNote"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>getValidNote</b></span>
                        <a href="#getValidNote"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getValidNote()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="83"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:83</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>{ string: number; fret: number; }</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getWeightedRandom"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>getWeightedRandom</b></span>
                        <a href="#getWeightedRandom"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getWeightedRandom(undefined: literal type)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="291"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:291</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Picks the random item based on its weight.
The items with higher weight will be picked more often (with a higher probability).</p>
<p>For example:</p>
<ul>
<li>items = [&#39;banana&#39;, &#39;orange&#39;, &#39;apple&#39;]</li>
<li>weights = [0, 0.2, 0.8]</li>
<li>weightedRandom(items, weights) in 80% of cases will return &#39;apple&#39;, in 20% of cases will return
&#39;orange&#39; and it will never return &#39;banana&#39; (because probability of picking the banana is 0%)</li>
</ul>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                            <code>literal type</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </div>
                    <div class="io-description">
                        <p>: any}</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setPreviousState"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>setPreviousState</b></span>
                        <a href="#setPreviousState"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setPreviousState(nextString: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, nextFret: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="256"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:256</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>nextString</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>nextFret</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setupFretWeights"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>setupFretWeights</b></span>
                        <a href="#setupFretWeights"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setupFretWeights(notes: FretboardNote[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="157"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:157</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>notes</td>
                                    <td>
                                            <code>FretboardNote[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>number[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="setupStringWeights"></a>
                    <span class="name">
                        <span class="modifier">Private</span>
                        <span ><b>setupStringWeights</b></span>
                        <a href="#setupStringWeights"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>setupStringWeights(previousString: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="118"
                            class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:118</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>previousString</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>number[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_countIn"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_countIn</b></span>
                        <a href="#_countIn"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>2</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="51" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:51</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_currentBar"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_currentBar</b></span>
                        <a href="#_currentBar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>0</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="52" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:52</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_frets"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_frets</b></span>
                        <a href="#_frets"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>22</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="54" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:54</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_resolution"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_resolution</b></span>
                        <a href="#_resolution"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>4</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="53" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:53</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_startOfBar"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>_startOfBar</b></span>
                        <a href="#_startOfBar"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="55" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:55</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="cagedShapes"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>cagedShapes</b></span>
                        <a href="#cagedShapes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>number[][]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[
    [0, 3],
    [2, 5],
    [4, 8],
    [7, 10],
    [9, 13],
    [12, 15],
    [14, 17],
    [16, 20],
    [19, 22],
  ]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:36</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="key"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>key</b></span>
                        <a href="#key"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;C&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="57" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:57</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="major"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>major</b></span>
                        <a href="#major"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>number[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:33</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="notes"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>notes</b></span>
                        <a href="#notes"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[
    &#x27;A&#x27;,
    &#x27;A#&#x27;,
    &#x27;B&#x27;,
    &#x27;C&#x27;,
    &#x27;C#&#x27;,
    &#x27;D&#x27;,
    &#x27;D#&#x27;,
    &#x27;E&#x27;,
    &#x27;F&#x27;,
    &#x27;F#&#x27;,
    &#x27;G&#x27;,
    &#x27;G#&#x27;,
  ]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:18</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="previousFret"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>previousFret</b></span>
                        <a href="#previousFret"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>number | undefined</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:49</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="previousString"></a>
                    <span class="name">
                            <span class="modifier">Private</span>
                        <span ><b>previousString</b></span>
                        <a href="#previousString"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>number | undefined</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:48</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="strings"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>strings</b></span>
                        <a href="#strings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>FretboardString[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="61" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:61</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="tuning"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                        <span ><b>tuning</b></span>
                        <a href="#tuning"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>string[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[&#x27;E&#x27;, &#x27;B&#x27;, &#x27;G&#x27;, &#x27;D&#x27;, &#x27;A&#x27;, &#x27;E&#x27;]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="58" class="link-to-prism">libs/etude/src/lib/etude/utils/progression.service.ts:58</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { FretboardNote, FretboardString } from &#x27;@ng-guitar/fretboard&#x27;;
import { Notes } from &#x27;@ng-guitar/tab-scroller&#x27;;

/**
 * The progression service returns notes in a progression.
 * To keep practice interesting these should be randomised, but
 * the selection should be weighted by good notes to play given last
 * note, key and location within bar
 *
 * @export
 * @class ProgressionService
 */
@Injectable({
  providedIn: &#x27;root&#x27;,
})
export class ProgressionService {
  private notes: string[] &#x3D; [
    &#x27;A&#x27;,
    &#x27;A#&#x27;,
    &#x27;B&#x27;,
    &#x27;C&#x27;,
    &#x27;C#&#x27;,
    &#x27;D&#x27;,
    &#x27;D#&#x27;,
    &#x27;E&#x27;,
    &#x27;F&#x27;,
    &#x27;F#&#x27;,
    &#x27;G&#x27;,
    &#x27;G#&#x27;,
  ];

  private major: number[] &#x3D; [1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1];

  // TO DO: these should be dynamic driven by key
  private cagedShapes: number[][] &#x3D; [
    [0, 3],
    [2, 5],
    [4, 8],
    [7, 10],
    [9, 13],
    [12, 15],
    [14, 17],
    [16, 20],
    [19, 22],
  ];

  private previousString: number | undefined;
  private previousFret: number | undefined;

  private _countIn &#x3D; 2;
  private _currentBar &#x3D; 0;
  private _resolution &#x3D; 4;
  private _frets &#x3D; 22;
  private _startOfBar &#x3D; false;

  public key &#x3D; &#x27;C&#x27;;
  public tuning: string[] &#x3D; [&#x27;E&#x27;, &#x27;B&#x27;, &#x27;G&#x27;, &#x27;D&#x27;, &#x27;A&#x27;, &#x27;E&#x27;];

  //TO DO: Review scoping this introduces coupling
  public strings: FretboardString[] &#x3D; [];

  getNextNotes(beat: number): Notes {
    this._startOfBar &#x3D; beat &#x3D;&#x3D;&#x3D; 0 ? true : false;

    const { string, fret }: { string: number; fret: number } &#x3D;
      this.getValidNote();

    const notesToAdd: string[] &#x3D; [];
    for (let i &#x3D; 0; i &lt; 6; i++) {
      if (string &#x3D;&#x3D;&#x3D; i) {
        notesToAdd.push(fret.toString());
      } else {
        notesToAdd.push(&#x27;&#x27;);
      }
    }

    const notes: Notes &#x3D; { notes: notesToAdd, bar: this._startOfBar };

    return notes;
  }

  private getValidNote() {
    const string: number &#x3D; this.getString();
    const fret: number &#x3D; this.getFret(string);

    this.setPreviousState(string, fret);
    return { string, fret };
  }

  getString(): number {
    let string &#x3D; 0;
    if (typeof this.previousString &#x3D;&#x3D;&#x3D; &#x27;undefined&#x27;) {
      string &#x3D; this.getRandomIntegerInRange(0, 5);
    } else {
      const stringWeights: number[] &#x3D; this.setupStringWeights(
        this.previousString
      );
      const chooseFrom &#x3D; this.getNumericArrayOfStringNumbers();

      string &#x3D; this.getWeightedRandom({
        items: chooseFrom,
        weights: stringWeights,
      });
    }

    return string;
  }

  getNumericArrayOfStringNumbers(): number[] {
    const stringNumbers: number[] &#x3D; [];
    for (let i &#x3D; 0; i &lt; this.strings.length; i++) {
      stringNumbers.push(i);
    }
    return stringNumbers;
  }

  private setupStringWeights(previousString: number): number[] {
    const stringWeights: number[] &#x3D; [];

    // Proximity Weights
    const weightMultiplier &#x3D; this.strings.length / 100;
    for (let i &#x3D; 0; i &lt; this.strings.length; i++) {
      const diff &#x3D; Math.abs(previousString - i);
      const inverse &#x3D; this.strings.length - diff;
      let weight &#x3D; inverse * weightMultiplier;
      if (diff &lt; 2) {
        weight &#x3D; weight * 2;
      }
      stringWeights.push(weight);
    }

    return stringWeights;
  }

  getFret(string: number): number {
    let fret &#x3D; 0;

    const stringDetails: FretboardString &#x3D; this.strings[string];
    const notes: FretboardNote[] &#x3D; stringDetails.notes;

    if (typeof this.previousFret &#x3D;&#x3D;&#x3D; &#x27;undefined&#x27;) {
      //TO DO: If no previous fret then get first root on string
      fret &#x3D; this.getRandomIntegerInRange(0, this._frets);
    } else {
      const fretWeights: number[] &#x3D; this.setupFretWeights(notes);
      const chooseFrom &#x3D; this.getNumericArrayOfFretNumbers(notes);
      fret &#x3D; this.getWeightedRandom({
        items: chooseFrom,
        weights: fretWeights,
      });
    }

    return fret;
  }

  private setupFretWeights(notes: FretboardNote[]): number[] {
    const fretWeights: number[] &#x3D; [];
    const previousFret &#x3D; this.previousFret || 0;
    const weightMultiplier &#x3D; notes.length / 100;

    // Proximity Weights
    this.addFretProximityWeights(
      notes,
      previousFret,
      weightMultiplier,
      fretWeights
    );

    // Add On Caged Shape Weights
    this.addCagedShapeWeights(notes, weightMultiplier, fretWeights);

    // Add on Chord Weights (if applicable) i.e. playing the changes

    // If first note of bar then add increased chord weight

    return fretWeights;
  }

  private addCagedShapeWeights(
    notes: FretboardNote[],
    weightMultiplier: number,
    fretWeights: number[]
  ) {
    const previousFret &#x3D; this.previousFret || 0;

    console.log(&#x27;previousFret&#x27;, previousFret);
    const relevantShapes &#x3D; this.cagedShapes.filter((cagedShape) &#x3D;&gt; {
      let relevant &#x3D; false;
      if (previousFret &gt;&#x3D; cagedShape[0] &amp;&amp; previousFret &lt;&#x3D; cagedShape[1]) {
        relevant &#x3D; true;
      }
      return relevant;
    });
    if (relevantShapes.length &gt; 0) {
      const minFret &#x3D; relevantShapes
        .map((cagedShape) &#x3D;&gt; cagedShape[0])
        .reduce((a, b) &#x3D;&gt; Math.min(a, b));

      console.log(&#x27;minFret&#x27;, minFret);

      const maxFret &#x3D; relevantShapes
        .map((cagedShape) &#x3D;&gt; cagedShape[1])
        .reduce((a, b) &#x3D;&gt; Math.max(a, b));
      console.log(&#x27;minFret&#x27;, maxFret);

      for (let i &#x3D; minFret; i &lt;&#x3D; maxFret; i++) {
        let weight: number;

        if (notes[i].inKey &#x3D;&#x3D;&#x3D; true) {
          const diff &#x3D; Math.abs(previousFret - i);
          const inverse &#x3D; notes.length - diff;
          weight &#x3D; inverse * weightMultiplier;
        } else {
          weight &#x3D; 0;
        }
        fretWeights[i] +&#x3D; weight * 1.5;
      }
    }
  }

  private addFretProximityWeights(
    notes: FretboardNote[],
    previousFret: number,
    weightMultiplier: number,
    fretWeights: number[]
  ) {
    for (let i &#x3D; 0; i &lt; notes.length; i++) {
      let weight: number;

      if (notes[i].inKey &#x3D;&#x3D;&#x3D; true) {
        let stretchAdjustedWeight &#x3D; weightMultiplier;
        const diff &#x3D; Math.abs(previousFret - i);
        const inverse &#x3D; notes.length - diff;
        if (diff &lt; 1 || diff &gt; 3) {
          stretchAdjustedWeight &#x3D; weightMultiplier / 2;
        } else {
          stretchAdjustedWeight &#x3D; weightMultiplier * 3;
        }
        weight &#x3D; inverse * stretchAdjustedWeight;
      } else {
        weight &#x3D; 0;
      }
      fretWeights.push(weight);
    }
  }

  getNumericArrayOfFretNumbers(notes: FretboardNote[]): number[] {
    const fretNumbers: number[] &#x3D; [];
    for (let i &#x3D; 0; i &lt; notes.length; i++) {
      fretNumbers.push(i);
    }
    return fretNumbers;
  }

  private setPreviousState(nextString: number, nextFret: number) {
    this.previousString &#x3D; nextString;
    this.previousFret &#x3D; nextFret;
  }

  /**
   * Returns a random integer between min (inclusive) and max (inclusive)
   *
   * @param {number} min
   * @param {number} max
   * @return {*}  {number}
   * @memberof Random
   */
  public getRandomIntegerInRange(min: number, max: number): number {
    min &#x3D; Math.ceil(min);
    max &#x3D; Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  /**
   * Picks the random item based on its weight.
   * The items with higher weight will be picked more often (with a higher probability).
   *
   * For example:
   * - items &#x3D; [&#x27;banana&#x27;, &#x27;orange&#x27;, &#x27;apple&#x27;]
   * - weights &#x3D; [0, 0.2, 0.8]
   * - weightedRandom(items, weights) in 80% of cases will return &#x27;apple&#x27;, in 20% of cases will return
   * &#x27;orange&#x27; and it will never return &#x27;banana&#x27; (because probability of picking the banana is 0%)
   *
   * @param {number[]} items
   * @param {number[]} weights
   * @returns {item: any}
   */
  /* eslint-disable consistent-return */

  public getWeightedRandom({
    items,
    weights,
  }: {
    items: number[];
    weights: number[];
  }): number {
    // First, we loop the main itemsset to count up the total weight.
    // We&#x27;re starting the counter at one because the upper boundary
    // of Math.random() is exclusive.
    let total &#x3D; 0;
    for (let i &#x3D; 0; i &lt; items.length; ++i) {
      total +&#x3D; weights[i];
    }

    // Total in hand, we can now pick a random value akin to our
    // random index from before.
    const threshold &#x3D; Math.random() * total;

    // Now we just need to loop through the main items one more time
    // until we discover which value would live within this
    // particular threshold. We need to keep a running count of
    // weights as we go, so let&#x27;s just reuse the &quot;total&quot; variable
    // since it was already declared.
    total &#x3D; 0;
    for (let i &#x3D; 0; i &lt; items.length - 1; ++i) {
      // Add the weight to our running total.
      total +&#x3D; weights[i];

      // If this value falls within the threshold, we&#x27;re done!
      if (total &gt;&#x3D; threshold) {
        return items[i];
      }
    }

    // Wouldn&#x27;t you know it, we needed the very last entry!
    return items[items.length - 1];
  }
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'ProgressionService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
